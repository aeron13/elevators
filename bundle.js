(()=>{"use strict";class t{constructor(t,e){this.number=t,this.button=document.createElement("button"),this.button.classList.add("floor-button"),this.button.innerText=`${this.number}`,this.button.addEventListener("click",e),this.element=document.createElement("div"),this.element.classList.add("floor"),this.element.append(this.button)}}class e{constructor(t,e){this.number=t,this.element=document.createElement("button"),this.element.classList.add("elevator-button"),this.element.addEventListener("click",e),this.element.innerText=`${this.number}`}}class s{constructor(t,s){this.floor=0,this.speed=1e3,this.isMoving=!1,this.buttons=[],this.id=t,this.element=document.createElement("div"),this.element.classList.add("elevator"),this.element.style.left=20*this.id+25+"%";const o=document.createElement("div");for(let t=0;t<=s;t++){const s=new e(t,(e=>{e.preventDefault(),this.goToFloor(t)}));o.prepend(s.element),this.buttons.push(s)}this.element.append(o),this.updateButtons()}goToFloor(t){const e=Math.abs(t-this.floor),s=this.speed*e,o=t-this.floor>0?1:-1;this.element.style.transform=`translateY(-${100*t}%)`,this.element.style.transitionDuration=`${s}ms`,this.isMoving=!0,this.updateFloor(e,o)}updateFloor(t,e){0!=t?(t--,setTimeout((()=>{this.floor=this.floor+e,this.updateButtons(),this.updateFloor(t,e)}),this.speed)):this.isMoving=!1}updateButtons(){this.buttons.forEach((t=>{t.element.style.opacity="0.5"})),this.buttons[this.floor].element.style.opacity="1"}}(new class{constructor(){this.height=4,this.elevators=[];for(let t=0;t<3;t++){const e=new s(t,this.height);this.elevators.push(e)}this.floors=[];for(let e=0;e<=this.height;e++){const s=new t(e,(t=>{t.preventDefault(),this.callElevator(e)}));this.floors.push(s)}}callElevator(t){const e=this.elevators.find((e=>e.floor===t&&!e.isMoving));if(e)return void e.goToFloor(t);const s=this.elevators.filter((t=>!t.isMoving));0!=s.length?(s.sort(((e,s)=>Math.abs(t-e.floor)-Math.abs(t-s.floor))),s[0].goToFloor(t)):setTimeout((()=>{this.callElevator(t)}),1e3)}render(){var t;const e=document.createElement("div");e.classList.add("palace"),this.floors.forEach((t=>{e.prepend(t.element)})),this.elevators.forEach((t=>{e.append(t.element)})),null===(t=document.querySelector("#app"))||void 0===t||t.append(e)}}).render()})();